:root {
    --glass-bg: rgba(20, 20, 25, 0.75);
    --glass-border: rgba(255, 255, 255, 0.15);
    --glass-blur: blur(10px);
    --accent-green: #4CAF50;
    --accent-hover: #45a049;
    --text-main: #f0f0f0;
    --text-muted: #aaa;
    --xp-color: #2ecc71;
}

body { margin: 0; padding: 0; background-color: #050505; color: var(--text-main); font-family: 'Inter', 'Segoe UI', system-ui, sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; overflow: hidden; user-select: none; }
#game-wrapper { position: relative; box-shadow: 0 20px 60px rgba(0,0,0,0.8); border-radius: 8px; overflow: hidden; width: 100vw; max-width: 1280px; aspect-ratio: 16/9; }
canvas { display: block; width: 100%; height: 100%; background-color: #87CEEB; cursor: crosshair; }

/* El UI layer bloquea los clics por defecto, debemos activar pointer-events en sus hijos */
#ui-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }

/* MENÃš PRINCIPAL */
#main-menu { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle, rgba(20,20,30,0.9) 0%, rgba(5,5,10,1) 100%); z-index: 1000; display: flex; flex-direction: column; align-items: center; justify-content: center; pointer-events: auto; }
.menu-box { display: flex; flex-direction: column; width: 350px; padding: 30px; text-align: center; }
.menu-title { font-size: 2.5rem; margin: 0 0 5px 0; color: #4CAF50; letter-spacing: 2px; }
.menu-subtitle { color: #aaa; margin-bottom: 20px; font-size: 0.9rem; }
.menu-input { width: calc(100% - 24px); padding: 12px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.2); background: rgba(0,0,0,0.5); color: white; margin-bottom: 15px; outline: none; }

.glass-panel { background: var(--glass-bg); backdrop-filter: var(--glass-blur); border: 1px solid var(--glass-border); border-radius: 10px; pointer-events: auto; }
#distance-display { position: absolute; top: 15px; left: 15px; padding: 6px 12px; border-radius: 8px; font-weight: 700; font-size: 0.85rem; pointer-events: auto; }

/* PANEL DE SERVIDOR */
#server-info { position: absolute; top: 55px; left: 15px; font-size: 0.75rem; padding: 6px 12px; color: #aaa; border-radius: 8px; display: none; align-items: center; gap: 5px; pointer-events: auto; }

#clock-display { position: absolute; top: 15px; left: 50%; transform: translateX(-50%); padding: 4px 12px; border-radius: 15px; font-weight: 700; font-size: 0.95rem; color: #FFD700; background: rgba(0,0,0,0.5); backdrop-filter: blur(8px); }
.stealth-mode { color: #88ccee !important; background: rgba(0,20,50,0.6) !important; font-style: italic; box-shadow: 0 0 10px rgba(136, 204, 238, 0.2); }

#top-controls { position: absolute; top: 15px; right: 15px; display: flex; gap: 8px; pointer-events: auto; }
.toggle-btn { background: rgba(255, 255, 255, 0.05); border: 1px solid var(--glass-border); color: white; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.8rem; position: relative; pointer-events: auto; }
#btn-help { width: 30px; height: 30px; padding: 0; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1rem; font-weight: 800; pointer-events: auto;}

.stat-notif { position: absolute; top: -6px; right: -6px; background: #ff4444; color: white; font-size: 0.7rem; font-weight: 900; width: 18px; height: 18px; border-radius: 50%; display: none; align-items: center; justify-content: center; animation: pulseNotif 1.5s infinite; }
@keyframes pulseNotif { 0% { transform: scale(1); } 50% { transform: scale(1.15); } 100% { transform: scale(1); } }

#status-bars { position: absolute; top: 60px; right: 15px; display: flex; flex-direction: column; gap: 8px; width: 160px; align-items: flex-end; pointer-events: auto;}
.bar-wrapper { width: 100%; display: flex; flex-direction: column; gap: 3px; }
.bar-label { font-size: 0.7rem; font-weight: 700; color: #eee; display: flex; justify-content: space-between; }
.bar-container { width: 100%; height: 8px; background: rgba(0,0,0,0.5); border-radius: 8px; overflow: hidden; border: 1px solid rgba(255,255,255,0.1); }
.bar-fill { height: 100%; transition: width 0.3s ease; }
#hp-fill { background: linear-gradient(90deg, #e53935, #ff6b6b); }
#hunger-fill { background: linear-gradient(90deg, #f39c12, #ffb142); }
#xp-fill { background: linear-gradient(90deg, #27ae60, #2ecc71); }
.level-text-highlight { color: var(--xp-color); }

#toolbar { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); display: flex; flex-direction: column; gap: 8px; pointer-events: auto; }
.tool-slot { width: 42px; height: 42px; background: rgba(0,0,0,0.4); border: 1px solid var(--glass-border); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; cursor: pointer; transition: all 0.2s; position: relative; overflow: hidden;}
.tool-slot.active { border-color: var(--accent-green); color: #fff; background: rgba(76, 175, 80, 0.15); transform: scale(1.1) translateX(5px); overflow: visible;}
.tool-durability-bg { position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: rgba(0,0,0,0.6); }
.tool-durability-fill { height: 100%; transition: width 0.2s; }

/* FIX BUG 1: BARRAS DE VIDA ENEMIGOS RESTAURADAS */
#entity-hud { position: absolute; top: 90px; left: 15px; display: flex; flex-direction: column; gap: 6px; pointer-events: none; }
.entity-bar-container { background: rgba(0,0,0,0.6); backdrop-filter: blur(4px); border: 1px solid rgba(255,255,255,0.1); padding: 5px 8px; border-radius: 6px; width: 130px; }
.entity-info { display: flex; justify-content: space-between; font-size: 0.65rem; font-weight: 700; color: #ddd; margin-bottom: 3px; }
.entity-hp-bg { background: rgba(0,0,0,0.8); height: 5px; border-radius: 3px; overflow: hidden; width: 100%; }
.entity-hp-fill { height: 100%; transition: width 0.1s ease-out; }

#game-tips { display: none; position: absolute; bottom: 20px; right: 15px; padding: 15px; font-size: 0.8rem; text-align: left; color: #eee; line-height: 1.5; z-index: 5; width: max-content; max-width: 280px; background: rgba(10, 10, 15, 0.9); pointer-events: auto; }
.tip-highlight { color: var(--accent-green); font-weight: 700; }

#interaction-prompt { position: absolute; bottom: 15%; left: 50%; transform: translateX(-50%); padding: 6px 15px; border-radius: 20px; font-size: 0.8rem; display: none; pointer-events: none;}
#placement-overlay { position: absolute; top: 15%; left: 50%; transform: translateX(-50%); padding: 10px 20px; border-radius: 10px; font-weight: 800; color: #FFD700; background: rgba(0,0,0,0.8); display: none; pointer-events: none;}
.key-btn { background: #fff; color: #000; padding: 1px 6px; border-radius: 4px; font-weight: 800; margin: 0 4px; box-shadow: 0 1px 0 #ccc; }

.window-menu { display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); padding: 15px; z-index: 10; pointer-events: auto; }
.window-menu.open { display: block; }
.window-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--glass-border); padding-bottom: 8px; margin-bottom: 12px; }
.window-header h3 { margin: 0; font-size: 1.05rem; }
.close-btn { background: none; border: none; color: var(--text-muted); cursor: pointer; }

.inv-split { display: flex; gap: 15px; }
.inv-left { flex: 1; }
.inv-right { flex: 1; border-left: 1px solid rgba(255,255,255,0.1); padding-left: 15px; }
.inv-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; margin-bottom: 12px; }
.inv-slot { background: rgba(0,0,0,0.4); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; height: 45px; display: flex; align-items: center; justify-content: center; position: relative; cursor: pointer; }
.inv-icon { width: 20px; height: 20px; }
.inv-amount { position: absolute; bottom: 2px; right: 4px; font-size: 0.7rem; font-weight: 800; }

.stat-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; font-size: 0.8rem; background: rgba(255,255,255,0.03); padding: 4px 8px; border-radius: 4px;}
.stat-btn { background: var(--accent-green); color: #fff; border: none; width: 20px; height: 20px; border-radius: 4px; font-weight: bold; cursor: pointer; }

.search-bar { width: calc(100% - 22px); padding: 8px 10px; margin-bottom: 10px; border-radius: 6px; border: 1px solid var(--glass-border); background: rgba(0,0,0,0.5); color: white; font-family: inherit; font-size: 0.8rem; outline: none;}
#craft-list { max-height: 50vh; overflow-y: auto; padding-right: 5px; }
.craft-item { background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.05); padding: 10px; border-radius: 8px; margin-bottom: 8px; }
.craft-header { display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 6px; }
.req-text { font-size: 0.7rem; color: #ff6b6b; font-weight: 600; text-align: right; }
.req-text-ok { color: var(--text-muted); font-weight: normal; }
button.action-btn { width: 100%; background-color: var(--accent-green); color: white; border: none; padding: 6px 8px; border-radius: 4px; cursor: pointer; font-weight: 700; transition: all 0.2s; margin-bottom: 5px;}
button.action-btn:hover { background-color: var(--accent-hover); }
button.action-btn:disabled { background: rgba(255,255,255,0.1); color: var(--text-muted); cursor: not-allowed; }
.craft-actions { display: flex; gap: 5px; margin-top: 5px; }
.action-btn.mini { flex: 1; padding: 6px 2px; font-size: 0.75rem; margin:0;}

::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 10px; }